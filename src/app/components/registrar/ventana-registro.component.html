<div class="toda-la-pagina">
    
    <a routerLink="/login" class="btn-volver-login">
        <i class="fas fa-arrow-left"></i> Volver al Login
    </a>

    <div class="register-card">
        
        <div class="card-header">
            <h2>Crear Cuenta</h2>
            <p>Únete a nuestra comunidad deportiva</p>
        </div>
        
        <form (ngSubmit)="savePersona()" #personaForm="ngForm">
            
            <div class="form-grid">
                
                <div class="form-group">
                    <label>Nombre</label>
                    <div class="input-wrapper">
                        <i class="fas fa-user input-icon"></i>
                        <input type="text" class="form-control" placeholder="Juan"
                               [(ngModel)]="persona.name" name="nombre" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Apellido</label>
                    <div class="input-wrapper">
                        <i class="fas fa-user-tag input-icon"></i>
                        <input type="text" class="form-control" placeholder="Pérez"
                               [(ngModel)]="persona.lastname" name="apellido" required>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label>Correo Electrónico</label>
                    <div class="input-wrapper">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="email" class="form-control" placeholder="ejemplo@email.com"
                               [(ngModel)]="persona.email" name="mail" required>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label>Contraseña</label>
                    <div class="input-wrapper">
                        <i class="fas fa-lock input-icon"></i>
                        <input [type]="mostrarPassword ? 'text' : 'password'" 
                               class="form-control" placeholder="Mínimo 6 caracteres"
                               [(ngModel)]="persona.password" name="password" required>
                        <button type="button" class="btn-toggle-pass" (click)="togglePassword()">
                            <i class="fas" [ngClass]="mostrarPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label>DNI</label>
                    <div class="input-wrapper">
                        <i class="fas fa-id-card input-icon"></i>
                        <input type="number" class="form-control" placeholder="Sin puntos"
                               [(ngModel)]="persona.dni" name="dni" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Teléfono</label>
                    <div class="input-wrapper">
                        <i class="fas fa-phone input-icon"></i>
                        <input type="number" class="form-control" placeholder="341..."
                               [(ngModel)]="persona.phone" name="phone" required>
                    </div>
                </div>

            </div>

            <div class="empleado-section">
                
                <div class="form-check form-switch custom-switch">
                    <input class="form-check-input" type="checkbox" id="checkAdmin" 
                           [(ngModel)]="esEmpleado" name="esEmpleado">
                    <label class="form-check-label" for="checkAdmin">
                        Soy personal del complejo
                    </label>
                </div>

                <div *ngIf="esEmpleado" class="admin-code-wrapper">
                    <label class="label-danger"><i class="fas fa-key"></i> Clave de Activación</label>
                    <input type="password" 
                           class="form-control input-danger" 
                           [(ngModel)]="codigoAdmin" 
                           name="codigoAdmin" 
                           placeholder="Ingresa la clave maestra...">
                </div>
            </div>

            <button type="submit" class="btn-primary" [disabled]="cargando || personaForm.invalid">
                <span *ngIf="!cargando">Registrarse <i class="fas fa-user-plus ms-2"></i></span>
                <span *ngIf="cargando"><i class="fas fa-spinner fa-spin"></i> Procesando...</span>
            </button>
            
        </form>

        <div *ngIf="registroConfirmado" class="feedback-msg success">
            <i class="fas fa-check-circle"></i> ¡Registro exitoso! Redirigiendo...
        </div>

        <div *ngIf="usuarioRegistrado" class="feedback-msg error">
            <i class="fas fa-exclamation-triangle"></i> El correo ya está registrado.
        </div>
        
        <div *ngIf="errorClaveIncorrecta" class="feedback-msg error">
            <i class="fas fa-times-circle"></i> La clave de activación es incorrecta. 
            <br><small>Verifique la clave o desmarque la opción de empleado.</small>
        </div>
        
    </div>
</div>